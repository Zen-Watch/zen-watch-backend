CREATE TABLE ifttt_action_run_history (
  id INT NOT NULL AUTO_INCREMENT,
  ifttt_action_run_history_worker_shard_id INT NOT NULL,
  dev_id INT NOT NULL,
  ifttt_instance_id INT NOT NULL,
  ifttt_trigger_run_history_id INT NOT NULL,
  is_action_trusted_source TINYINT(1) DEFAULT 0,
  is_action_compute_intensive TINYINT(1) DEFAULT 0,
  action_target_resource_name VARCHAR(500) NOT NULL,
  action_run_status INT NOT NULL,
  action_run_info JSON NOT NULL,
  action_run_output JSON,
  created_ts TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
  updated_ts TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY(id),
  INDEX IARH_IARHWSI (ifttt_action_run_history_worker_shard_id ASC),
  INDEX IARHIATS (is_action_trusted_source),
  INDEX IARHIACI (is_action_compute_intensive),
  INDEX IARHATRN (action_target_resource_name ASC),
  INDEX IARHARS (action_run_status ASC),
  INDEX IARHCTS (created_ts ASC),
  INDEX IARHUTS (updated_ts ASC),
  CONSTRAINT IARHD_FK FOREIGN KEY(dev_id) REFERENCES developer(id) ON DELETE RESTRICT ON UPDATE CASCADE,
  CONSTRAINT IARHIID_FK FOREIGN KEY(ifttt_instance_id) REFERENCES ifttt_instance(id) ON DELETE RESTRICT ON UPDATE CASCADE,
  CONSTRAINT IARHITRH_FK FOREIGN KEY(ifttt_trigger_run_history_id) REFERENCES ifttt_trigger_run_history(id) ON DELETE RESTRICT ON UPDATE CASCADE
);